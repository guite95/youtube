# .ebextensions/01_install_ffmpeg.config (Amazon Linux 2023용 최종 권장 구성)

packages:
  # Amazon Linux 2023에서 'Extra Packages for Enterprise Linux (EPEL)'을 활성화합니다.
  # 이는 ffmpeg와 같은 추가 도구를 설치하기 위해 필요합니다.
  # dnf 환경에서는 yum 대신 packages: yum 섹션을 사용하는 것이 더 안정적일 수 있습니다.
  yum:
    epel-release: []

commands:
  01_install_ffmpeg:
    # dnf를 사용하여 FFmpeg를 설치합니다. EPEL이 활성화되면 dnf로 설치 가능합니다.
    command: sudo dnf install -y ffmpeg
    # EB가 인스턴스 준비가 끝날 때까지 기다리도록 'wait for success'를 명시적으로 요청합니다.
    test: '[ $? -eq 0 ]'