# 이 파일의 위치: .ebextensions/01_install_ffmpeg.config
# Amazon Linux 2023 환경에 FFmpeg를 설치합니다.

commands:
  # 1. FFmpeg 설치에 필요한 리포지토리를 활성화합니다.
  # Amazon Linux 2023은 EPEL 대신 PowerTools/CRB와 유사한 repo를 사용합니다.
  # 여기서는 가장 간단한 방법인 dnf 명령으로 직접 설치를 시도합니다.
  01_install_ffmpeg:
    # dnf를 사용하여 FFmpeg를 설치합니다. '-y'는 'yes' 응답을 자동화합니다.
    command: sudo dnf install -y ffmpeg

  # 2. (선택 사항) 시스템 경로에 심볼릭 링크를 생성하여 yt-dlp가 ffmpeg를 확실히 찾게 합니다.
  02_link_ffmpeg:
    command: "sudo ln -sf /usr/bin/ffmpeg /usr/local/bin/ffmpeg"
    leader_only: true